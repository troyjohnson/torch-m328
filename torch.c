
/* library header includes */
#include <avr/io.h>
#include <avr/eeprom.h>
#include <util/delay.h>

/* constants */
/* port shutoff value */
#define OFF 0x00
/* output masks for each port output lead */
#define L0 0x01
#define L1 0x02
#define L2 0x04
#define L3 0x08
#define L4 0x10
#define L5 0x20
#define L6 0x40
#define L7 0x80
/* delay in ms */
#define D 0
/* number of LED display patterns */
#define LED_MAX 16
/* number of cycles per pattern for visibility */
#define CYCLES 400

/* loop variables */
unsigned int f = 0;
unsigned int led = 0;

/* pattern filters for each LED */
unsigned int pbl0[] = {0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF};
unsigned int pbl1[] = {0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF};
unsigned int pbl2[] = {0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF};
unsigned int pbl3[] = {0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00};
unsigned int pbl4[] = {0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF};
unsigned int pbl5[] = {0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF};
unsigned int pbl6[] = {0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF};
unsigned int pbl7[] = {0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00};
unsigned int pcl0[] = {0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF};
unsigned int pcl1[] = {0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF};
unsigned int pcl2[] = {0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF};
unsigned int pcl3[] = {0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00};
unsigned int pcl4[] = {0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF};
unsigned int pcl5[] = {0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF};
unsigned int pdl0[] = {0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF};
unsigned int pdl1[] = {0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00};
unsigned int pdl2[] = {0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF};
unsigned int pdl3[] = {0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF};
unsigned int pdl4[] = {0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF};
unsigned int pdl5[] = {0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00};
unsigned int pdl6[] = {0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF};
unsigned int pdl7[] = {0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF};

int main (void)
{
	/* set PORTB, PORTC, and PORTD for output */
	DDRB = 0xFF;
	DDRC = 0xFF;
	DDRD = 0xFF;

	/* loop forever */
	while ( 1 ) {
		/* loop once for each LED output pattern */
		for ( led = 0; led < LED_MAX; led++ ) {
			/* loop over all LEDs for a certain number of cycles to make the pattern visible */
			for ( f = 0 ; f < CYCLES; f++ ) {
				PORTB = L0 & pbl0[led];
				_delay_ms(D);
				PORTB = L1 & pbl1[led];
				_delay_ms(D);
				PORTB = L2 & pbl2[led];
				_delay_ms(D);
				PORTB = L3 & pbl3[led];
				_delay_ms(D);
				PORTB = L4 & pbl4[led];
				_delay_ms(D);
				PORTB = L5 & pbl5[led];
				_delay_ms(D);
				PORTB = L6 & pbl6[led];
				_delay_ms(D);
				PORTB = L7 & pbl7[led];
				_delay_ms(D);
				PORTB = OFF;
				PORTC = L0 & pcl0[led];
				_delay_ms(D);
				PORTC = L1 & pcl1[led];
				_delay_ms(D);
				PORTC = L2 & pcl2[led];
				_delay_ms(D);
				PORTC = L3 & pcl3[led];
				_delay_ms(D);
				PORTC = L4 & pcl4[led];
				_delay_ms(D);
				PORTC = L5 & pcl5[led];
				_delay_ms(D);
				PORTC = OFF;
				PORTD = L0 & pdl0[led];
				_delay_ms(D);
				PORTD = L1 & pdl1[led];
				_delay_ms(D);
				PORTD = L2 & pdl2[led];
				_delay_ms(D);
				PORTD = L3 & pdl3[led];
				_delay_ms(D);
				PORTD = L4 & pdl4[led];
				_delay_ms(D);
				PORTD = L5 & pdl5[led];
				_delay_ms(D);
				PORTD = L6 & pdl6[led];
				_delay_ms(D);
				PORTD = L7 & pdl7[led];
				_delay_ms(D);
				PORTD = OFF;
			}
		}
	}
	/* this should never happen */
	return 0;
}


